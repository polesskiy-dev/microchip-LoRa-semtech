<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Microchip LoRa Semtech: LoRa API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Microchip LoRa Semtech
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Semtech LoRa driver for Microchip SAM MCUs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">LoRa API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Include Library</h1>
<div class="fragment"><div class="line">#include &lt;LoRa.h&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Setup</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Begin</h2>
<p>Initialize the library with the specified frequency.</p>
<div class="fragment"><div class="line">LoRa.begin(frequency);</div>
</div><!-- fragment --><ul>
<li><code>frequency</code> - frequency in Hz (<code>433E6</code>, <code>868E6</code>, <code>915E6</code>)</li>
</ul>
<p>Returns <code>1</code> on success, <code>0</code> on failure.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Set pins</h2>
<p>Override the default <code>NSS</code>, <code>NRESET</code>, and <code>DIO0</code> pins used by the library. <b>Must</b> be called before <code>LoRa.begin()</code>.</p>
<div class="fragment"><div class="line">LoRa.setPins(ss, reset, dio0);</div>
</div><!-- fragment --><ul>
<li><code>ss</code> - new slave select pin to use, defaults to <code>10</code></li>
<li><code>reset</code> - new reset pin to use, defaults to <code>9</code></li>
<li><code>dio0</code> - new DIO0 pin to use, defaults to <code>2</code>. <b>Must</b> be interrupt capable via <a href="https://www.arduino.cc/en/Reference/AttachInterrupt">attachInterrupt(...)</a>.</li>
</ul>
<p>This call is optional and only needs to be used if you need to change the default pins used.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
No MCU controlled reset pin</h3>
<p>To save further pins one could connect the reset pin of the MCU with reset pin of the radio thus resetting only during startup.</p>
<ul>
<li><code>reset</code> - set to <code>-1</code> to omit this pin</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Pin dio0 interrupt callbacks</h3>
<p>The dio0 pin can be used for transmission finish callback and/or receiving callback, check <code>onTxDone</code> and <code>onReceive</code>.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Set SPI interface</h2>
<p>Override the default SPI interface used by the library. <b>Must</b> be called before <code>LoRa.begin()</code>.</p>
<div class="fragment"><div class="line">LoRa.setSPI(spi);</div>
</div><!-- fragment --><ul>
<li><code>spi</code> - new SPI interface to use, defaults to <code>SPI</code></li>
</ul>
<p>This call is optional and only needs to be used if you need to change the default SPI interface used, in the case your Arduino (or compatible) board has more than one SPI interface present.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Set SPI Frequency</h2>
<p>Override the default SPI frequency of 10 MHz used by the library. <b>Must</b> be called before <code>LoRa.begin()</code>.</p>
<div class="fragment"><div class="line">LoRa.setSPIFrequency(frequency);</div>
</div><!-- fragment --><ul>
<li><code>frequency</code> - new SPI frequency to use, defaults to <code>8E6</code></li>
</ul>
<p>This call is optional and only needs to be used if you need to change the default SPI frequency used. Some logic level converters cannot support high speeds such as 8 MHz, so a lower SPI frequency can be selected with <code>LoRa.setSPIFrequency(frequency)</code>.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
End</h2>
<p>Stop the library</p>
<div class="fragment"><div class="line">LoRa.end()</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Sending data</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Begin packet</h2>
<p>Start the sequence of sending a packet.</p>
<div class="fragment"><div class="line">LoRa.beginPacket();</div>
<div class="line"> </div>
<div class="line">LoRa.beginPacket(implicitHeader);</div>
</div><!-- fragment --><ul>
<li><code>implicitHeader</code> - (optional) <code>true</code> enables implicit header mode, <code>false</code> enables explicit header mode (default)</li>
</ul>
<p>Returns <code>1</code> if radio is ready to transmit, <code>0</code> if busy or on failure.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Writing</h2>
<p>Write data to the packet. Each packet can contain up to 255 bytes.</p>
<div class="fragment"><div class="line">LoRa.write(byte);</div>
<div class="line"> </div>
<div class="line">LoRa.write(buffer, length);</div>
</div><!-- fragment --><ul>
<li><code>byte</code> - single byte to write to packet</li>
</ul>
<p>or</p>
<ul>
<li><code>buffer</code> - data to write to packet</li>
<li><code>length</code> - size of data to write</li>
</ul>
<p>Returns the number of bytes written.</p>
<p><b>Note:</b> Other Arduino <code>Print</code> API's can also be used to write data into the packet</p>
<h2><a class="anchor" id="autotoc_md13"></a>
End packet</h2>
<p>End the sequence of sending a packet.</p>
<div class="fragment"><div class="line">LoRa.endPacket();</div>
<div class="line"> </div>
<div class="line">LoRa.endPacket(async);</div>
</div><!-- fragment --><ul>
<li><code>async</code> - (optional) <code>true</code> enables non-blocking mode, <code>false</code> waits for transmission to be completed (default)</li>
</ul>
<p>Returns <code>1</code> on success, <code>0</code> on failure.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Tx Done</h2>
<p><b>WARNING</b>: TxDone callback uses the interrupt pin on the <code>dio0</code> check <code>setPins</code> function!</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Register callback</h2>
<p>Register a callback function for when a packet transmission finish.</p>
<div class="fragment"><div class="line">LoRa.onTxDone(onTxDone);</div>
<div class="line"> </div>
<div class="line">void onTxDone() {</div>
<div class="line"> // ...</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>onTxDone</code> - function to call when a packet transmission finish.</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
Receiving data</h1>
<h2><a class="anchor" id="autotoc_md17"></a>
Parsing packet</h2>
<p>Check if a packet has been received.</p>
<div class="fragment"><div class="line">int packetSize = LoRa.parsePacket();</div>
<div class="line"> </div>
<div class="line">int packetSize = LoRa.parsePacket(size);</div>
</div><!-- fragment --><ul>
<li><code>size</code> - (optional) if <code>&gt; 0</code> implicit header mode is enabled with the expected a packet of <code>size</code> bytes, default mode is explicit header mode</li>
</ul>
<p>Returns the packet size in bytes or <code>0</code> if no packet was received.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Continuous receive mode</h2>
<p><b>WARNING</b>: Receive callback uses the interrupt pin on the <code>dio0</code>, check <code>setPins</code> function!</p>
<h3><a class="anchor" id="autotoc_md19"></a>
Register callback</h3>
<p>Register a callback function for when a packet is received.</p>
<div class="fragment"><div class="line">LoRa.onReceive(onReceive);</div>
<div class="line"> </div>
<div class="line">void onReceive(int packetSize) {</div>
<div class="line"> // ...</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>onReceive</code> - function to call when a packet is received.</li>
</ul>
<h3><a class="anchor" id="autotoc_md20"></a>
Receive mode</h3>
<p>Puts the radio in continuous receive mode.</p>
<div class="fragment"><div class="line">LoRa.receive();</div>
<div class="line"> </div>
<div class="line">LoRa.receive(int size);</div>
</div><!-- fragment --><ul>
<li><code>size</code> - (optional) if <code>&gt; 0</code> implicit header mode is enabled with the expected a packet of <code>size</code> bytes, default mode is explicit header mode</li>
</ul>
<p>The <code>onReceive</code> callback will be called when a packet is received.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Packet RSSI</h2>
<div class="fragment"><div class="line">int rssi = LoRa.packetRssi();</div>
</div><!-- fragment --><p>Returns the averaged RSSI of the last received packet (dBm).</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Packet SNR</h2>
<div class="fragment"><div class="line">float snr = LoRa.packetSnr();</div>
</div><!-- fragment --><p>Returns the estimated SNR of the received packet in dB.</p>
<h1><a class="anchor" id="autotoc_md23"></a>
RSSI</h1>
<div class="fragment"><div class="line">int rssi = LoRa.rssi();</div>
</div><!-- fragment --><p>Returns the current RSSI of the radio (dBm). RSSI can be read at any time (during packet reception or not)</p>
<h2><a class="anchor" id="autotoc_md24"></a>
Packet Frequency Error</h2>
<div class="fragment"><div class="line">long freqErr = LoRa.packetFrequencyError();</div>
</div><!-- fragment --><p>Returns the frequency error of the received packet in Hz. The frequency error is the frequency offset between the receiver centre frequency and that of an incoming LoRa signal.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Available</h2>
<div class="fragment"><div class="line">int availableBytes = LoRa.available()</div>
</div><!-- fragment --><p>Returns number of bytes available for reading.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Peeking</h2>
<p>Peek at the next byte in the packet.</p>
<div class="fragment"><div class="line">byte b = LoRa.peek();</div>
</div><!-- fragment --><p>Returns the next byte in the packet or <code>-1</code> if no bytes are available.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Reading</h2>
<p>Read the next byte from the packet.</p>
<div class="fragment"><div class="line">byte b = LoRa.read();</div>
</div><!-- fragment --><p>Returns the next byte in the packet or <code>-1</code> if no bytes are available.</p>
<p><b>Note:</b> Other Arduino <a href="https://www.arduino.cc/en/Reference/Stream"><code>Stream</code> API's</a> can also be used to read data from the packet</p>
<h1><a class="anchor" id="autotoc_md28"></a>
Other radio modes</h1>
<h2><a class="anchor" id="autotoc_md29"></a>
Idle mode</h2>
<p>Put the radio in idle (standby) mode.</p>
<div class="fragment"><div class="line">LoRa.idle();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30"></a>
Sleep mode</h2>
<p>Put the radio in sleep mode.</p>
<div class="fragment"><div class="line">LoRa.sleep();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md31"></a>
Radio parameters</h1>
<h2><a class="anchor" id="autotoc_md32"></a>
TX Power</h2>
<p>Change the TX power of the radio.</p>
<div class="fragment"><div class="line">LoRa.setTxPower(txPower);</div>
<div class="line"> </div>
<div class="line">LoRa.setTxPower(txPower, outputPin);</div>
</div><!-- fragment --><ul>
<li><code>txPower</code> - TX power in dB, defaults to <code>17</code></li>
<li><code>outputPin</code> - (optional) PA output pin, supported values are <code>PA_OUTPUT_RFO_PIN</code> and <code>PA_OUTPUT_PA_BOOST_PIN</code>, defaults to <code>PA_OUTPUT_PA_BOOST_PIN</code>.</li>
</ul>
<p>Supported values are <code>2</code> to <code>20</code> for <code>PA_OUTPUT_PA_BOOST_PIN</code>, and <code>0</code> to <code>14</code> for <code>PA_OUTPUT_RFO_PIN</code>.</p>
<p>Most modules have the PA output pin connected to PA BOOST,</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Frequency</h2>
<p>Change the frequency of the radio.</p>
<div class="fragment"><div class="line">LoRa.setFrequency(frequency);</div>
</div><!-- fragment --><ul>
<li><code>frequency</code> - frequency in Hz (<code>433E6</code>, <code>868E6</code>, <code>915E6</code>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md34"></a>
Spreading Factor</h2>
<p>Change the spreading factor of the radio.</p>
<div class="fragment"><div class="line">LoRa.setSpreadingFactor(spreadingFactor);</div>
</div><!-- fragment --><ul>
<li><code>spreadingFactor</code> - spreading factor, defaults to <code>7</code></li>
</ul>
<p>Supported values are between <code>6</code> and <code>12</code>. If a spreading factor of <code>6</code> is set, implicit header mode must be used to transmit and receive packets.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Signal Bandwidth</h2>
<p>Change the signal bandwidth of the radio.</p>
<div class="fragment"><div class="line">LoRa.setSignalBandwidth(signalBandwidth);</div>
</div><!-- fragment --><ul>
<li><code>signalBandwidth</code> - signal bandwidth in Hz, defaults to <code>125E3</code>.</li>
</ul>
<p>Supported values are <code>7.8E3</code>, <code>10.4E3</code>, <code>15.6E3</code>, <code>20.8E3</code>, <code>31.25E3</code>, <code>41.7E3</code>, <code>62.5E3</code>, <code>125E3</code>, <code>250E3</code>, and <code>500E3</code>.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Coding Rate</h2>
<p>Change the coding rate of the radio.</p>
<div class="fragment"><div class="line">LoRa.setCodingRate4(codingRateDenominator);</div>
</div><!-- fragment --><ul>
<li><code>codingRateDenominator</code> - denominator of the coding rate, defaults to <code>5</code></li>
</ul>
<p>Supported values are between <code>5</code> and <code>8</code>, these correspond to coding rates of <code>4/5</code> and <code>4/8</code>. The coding rate numerator is fixed at <code>4</code>.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Preamble Length</h2>
<p>Change the preamble length of the radio.</p>
<div class="fragment"><div class="line">LoRa.setPreambleLength(preambleLength);</div>
</div><!-- fragment --><ul>
<li><code>preambleLength</code> - preamble length in symbols, defaults to <code>8</code></li>
</ul>
<p>Supported values are between <code>6</code> and <code>65535</code>.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Sync Word</h2>
<p>Change the sync word of the radio.</p>
<div class="fragment"><div class="line">LoRa.setSyncWord(syncWord);</div>
</div><!-- fragment --><ul>
<li><code>syncWord</code> - byte value to use as the sync word, defaults to <code>0x12</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md39"></a>
CRC</h2>
<p>Enable or disable CRC usage, by default a CRC is not used.</p>
<div class="fragment"><div class="line">LoRa.enableCrc();</div>
<div class="line"> </div>
<div class="line">LoRa.disableCrc();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md40"></a>
Invert IQ Signals</h2>
<p>Enable or disable Invert the LoRa I and Q signals, by default a invertIQ is not used.</p>
<div class="fragment"><div class="line">LoRa.enableInvertIQ();</div>
<div class="line"> </div>
<div class="line">LoRa.disableInvertIQ();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md41"></a>
LNA Gain</h2>
<p>Set LNA Gain for better RX sensitivity, by default AGC (Automatic Gain Control) is used and LNA gain is not used.</p>
<div class="fragment"><div class="line">LoRa.setGain(gain);</div>
</div><!-- fragment --><ul>
<li><code>gain</code> - LNA gain</li>
</ul>
<p>Supported values are between <code>0</code> and <code>6</code>. If gain is 0, AGC will be enabled and LNA gain will not be used. Else if gain is from 1 to 6, AGC will be disabled and LNA gain will be used.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Other functions</h1>
<h2><a class="anchor" id="autotoc_md43"></a>
Random</h2>
<p>Generate a random byte, based on the Wideband RSSI measurement.</p>
<div class="fragment"><div class="line">byte b = LoRa.random();</div>
</div><!-- fragment --><p>Returns random byte. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
